В NestJS проект строится на трех основных компонентах:
- Модуль - главный файл какого либо ресурса. Объединяет в себе Сервисы и Контроллеры ресурса, для более удобного экспорта в другие Модули. Можно сравнить с материнской платой у ПК, в которую подключаются все другие компоненты.
- Сервис - файл с функциональностью ресурса. Содержит всю логику для работы с данными.
- Контроллер - файл для работы с маршрутизацией ресурса. Содержит эндпоинты для запросов.
---
## Модуль
Как было уже сказано, модуль это главный файл ресурса. В нем описываются импорты других модулей, контроллеры и провайдеры. Пример app.module.ts:
```tsx
import { Module } from '@nestjs/common';
import { AppController } from './app.controller';
import { AppService } from './app.service';

@Module({
  imports: [],
  controllers: [AppController],
  providers: [AppService],
})
export class AppModule {}

```

**Для генерации модуля, можно использовать команду:** `nest g mo [Название модуля]`

---
## Контроллер
Содержит в себе все эндпоинты для взаимодействия с ресурсом. Определяет функции выполняемые при REST запросах. Пример app.controller.ts:
```tsx
import { Controller, Get, Param, Redirect } from '@nestjs/common';
import { AppService } from './app.service';

@Controller()
export class AppController {
  constructor(private readonly appService: AppService) {}

  @Get()
  main(): string {
    return 'main';
  }

  @Get('hello')
  getHello(): string {
    return this.appService.getHello();
  }

  @Get('id=:id')
  getId(@Param() param: Record<string, string>): string {
    return `id: ${param.id}`;
  }

  @Get('*')
  @Redirect('/', 308)
  getRedirect() {
    return 'Wrong getway, reddirect to /';
  }
}

```

В данном примере используется декоратор @Get для определения функций при Get запросах.
Скобки возле декоратора содержат префикс пути для запроса. Третий запрос требует Параметр :id. То есть запрос на эндпоинт /id=3 вернет сообщение ‘id: 3’.

Последний запрос использует регулярное выражение. Символ * означает любое значение. Так как этот запрос определен самым последним, он будет исполняться в тех случая, когда все предыдущие не соответствуют запросу. Также запрос содержит декоратор @Redirect осуществляющий перенаправление на корневой путь с кодом 308. Возвращаемая строка из функции getRedirect() помещается в тело при перенаправлении.

Список всех поддерживаемых HTTP-методов в NestJS: _@Get, @Post, @Put, @Delete, @Patch, @Options, @Head, @All_

**Для генерации контроллера можно воспользоваться командой:**
`nest g co [Название контроллера]`

---
## Сервис
На самом деле Сервис является лишь одним из видов Провайдеров. Провайдеры бывают различных видов, которые буду рассмотрены потом. Сервис это провайдер который отвечает за функции взаимодействующие с данными. Именно эти функции вызываются в Контроллере при запросах.

---
[[1. Структура проекта NestJS]] | [[3. TypeOrm]]